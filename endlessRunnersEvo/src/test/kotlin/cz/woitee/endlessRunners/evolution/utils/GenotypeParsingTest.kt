package cz.woitee.endlessRunners.evolution.utils

import org.junit.jupiter.api.Assertions.*

class GenotypeParsingTest {
    @org.junit.jupiter.api.Test
    fun basicTest() {
        val s = "[[[0.42865779293276507],[0.2696288036680463],[0.8871423666315268],[-0.928016018736153],[0.4863191867295473],[0.6931596903848143],[-0.35347664051264704],[-0.52004796773371],[0.96188187935096],[-0.10587532876741834],[-0.15475114291195657],[0.6403634612932647],[0.7696554335519932],[-0.8322782379614044],[-0.6535337420296212],[0.8060114642241221],[0.7154045884459133],[0.9984348363537707],[-0.24543908891241317],[0.04777504702754998],[-0.5297667615190234],[-0.26358556110187514],[0.019132855175663543],[0.4840480486830816],[-0.6516693262678941],[0.6690464534426912],[-0.5670655555634765],[-0.3990884785088693],[0.589087932169865],[0.3867018440186829],[0.6626844549117852],[-0.6867328820144718],[-0.513281224646168],[0.3662143794473196],[-0.8917323703477633],[0.1809446306733884],[0.6572807316724387],[-0.5890977385891416],[0.8631481384640254],[0.16753532338366783],[0.9466435583841561],[0.8016415265299677],[0.49742681713616177],[-0.9499270785412048],[0.24135997183172497],[-0.5548663283437256],[-0.41226200987435613],[0.04587548215885118],[-0.9204175950945381]],[[0.9698330353714821],[0.13542825007150228],[-0.5254682137218389],[-0.5297611896470826],[-0.30610284730115334],[-0.9154038636179935],[0.8911829442527139],[-0.7938955378891346],[-0.5757770511512343],[0.824162665392941],[0.02541988285557162],[-0.8270125033043327],[0.9386745167602046],[0.9808457734963163],[0.45685179943724474],[-0.9452900014560761],[0.0320527665840733],[-0.7256759834914637],[-0.7415587383257112],[-0.3061316836493355],[0.7453020443669982],[-0.5983413317224029],[0.9902235889570195],[-0.08441558388219939],[0.6287453583762952],[-0.973203787645784],[0.8586963004961836],[-0.008029698996421697],[-0.5680530186556907],[-0.9342275544686207],[0.3320245187735007],[0.35580834451046783],[0.7842572357366491],[0.6007720223908746],[-0.43364036111108595],[-0.38756414409272244],[-0.37213220518935275],[-0.34949926663905284],[0.9034770335711677],[-0.23701874848059523],[-0.16256968811883166],[-0.030205011843537743],[0.16571452537459885],[-0.2557675909126971],[-0.5985668630696437],[-0.6502194791141869],[-0.3355472562932378],[-0.871518818773577],[-0.05382719187410823]],[[-0.3083141415058894],[-0.02579641193457949],[0.0059975849735312],[-0.6427666009120809],[0.09784460580971333],[0.6669812988339654],[0.5231924368181988],[0.366079119930391],[0.9437584108252679],[-0.891791842883241],[0.9115409485580597],[0.26442279080758624],[0.9171403602568993],[0.5949489970482262],[0.09176601731774214],[-0.21719790910583114],[-0.2862988498008612],[-0.258169863300695],[0.708342305985759],[-0.014297919081409649],[-7.220652984720743E-4],[-0.3912704996471863],[-0.4938677282968764],[0.6277670105777289],[-0.8936759990573773],[0.3274302606968713],[-0.8638953766597495],[-0.8671618350425727],[0.24368729989612703],[-0.5905418339199167],[-0.810178359493865],[-0.9601382477402285],[0.3162566983859523],[-0.9124709331115501],[-0.341523953042171],[-0.9755361661896904],[0.6361192103457927],[0.0948353586862205],[0.06430924471994359],[-0.7278340539353603],[-0.25867236703701435],[-0.07236893222825458],[-0.8726134532526277],[0.39455326902989585],[-0.8221716573208964],[0.23266535881342465],[0.9275623558686474],[-0.7045815314072179],[-0.545179998094437]],[[-0.9202729795209947],[0.4225881028842067],[-0.6945288359173039],[-0.21661592767950477],[0.20969914491743324],[0.8653671104089917],[0.661339594323318],[-0.7626745744035608],[0.22091309665239844],[0.049119334915924906],[-0.3404761584873648],[0.040896619179271454],[-0.6633481714065668],[-0.25504754841935107],[0.8155898859934894],[0.9752612402123764],[0.07899246971009655],[0.3027259387166401],[-0.9734766045836882],[0.2894960579304504],[0.3122816616952462],[0.496178390478228],[0.7448686158580635],[-0.7204080769920989],[0.7366714824846339],[0.03034819635485908],[0.10533146313262165],[0.6109534289050602],[0.3066063304928659],[-0.5711936021873596],[0.5466824403049064],[-0.0010059043730206163],[0.02175955682384334],[-0.6016265311082183],[-0.23369611490050612],[-0.27859720615249817],[0.10824589409299179],[-0.9148291445217933],[-0.4396859956796759],[0.7296823385360081],[-0.16136803691694324],[-0.6115669935213268],[0.14484212744606584],[0.06170103364511981],[-0.3526106813961678],[-0.6475392584769941],[0.47186603221625756],[0.41166526610473797],[-0.8573074065162567]],[[-0.2642902701530305],[0.3600319781223744],[-0.04165889435420622],[-0.10097710967837736],[-0.08854097288133334],[0.21581793596654286],[-0.8855714769783107],[0.5116242721957436],[-0.13611640174782957],[-0.7640283434382633],[0.23923698430270957],[-0.7505020027593439],[0.9172051320993759],[0.6146874778003397],[0.23697596103308882],[0.9640371233567437],[-0.26818804819871334],[0.9340334598444819],[-0.4928683915342402],[0.08368794194421003],[-0.48324349912146713],[-0.20533374127761483],[0.5053534617076649],[-0.37203941094782866],[0.7042598428558273],[0.9345065715861778],[-0.7613927429584848],[-0.2695597532635312],[-0.7258132045899552],[0.29357022655341414],[-0.39880553403123375],[-0.42561662281641777],[0.7951435881380111],[-0.9300944597358094],[0.005949218838271264],[0.6276976308384459],[-0.5835829138199791],[-0.04536203391482507],[-0.7301467348247548],[-0.477955035315901],[0.4438692069250676],[-0.19041555799916043],[-0.05438051143449352],[0.7036292368056936],[0.926237403622042],[0.24621541350586007],[-0.48961062331461047],[-0.6229814117737731],[0.7841919064462495]],[[0.8718729322127117],[-0.4315278491836816],[-0.35887649799601284],[-0.023105707225064887],[-0.9136841313656943],[0.5729282695333673],[0.5956283893244523],[0.882650561213771],[0.8201736675862148],[0.1920470876257343],[-0.1841566326054731],[0.35559680691851403],[0.7230471423228795],[-0.6176895036480916],[-0.12814242462531134],[-0.615234348801386],[0.022705306479198217],[0.8726923448846287],[-0.12793865383791125],[0.6739469118849861],[-0.006540314116729284],[0.6804700078076826],[0.3260137944370487],[0.882720357159664],[0.1318319301257449],[0.39434898118776207],[0.6344516854180999],[-0.9308641273269918],[-0.3679377726896824],[-0.1824282180469865],[0.8362523179748682],[-0.9646603984357278],[0.7203329299698691],[-0.20477461038394074],[-0.5423288330442961],[0.3628622960806709],[0.3931099018741637],[-0.9618973342454007],[-0.07360693067644286],[0.8687196010987428],[-0.17786658935025557],[0.9394335495047228],[-0.616978971321338],[0.228026790931533],[0.33895224544653013],[-0.043218892067052206],[-0.48262623087600653],[-0.4093258408719449],[-0.2754145590048509]],[[-0.9898227413961802],[-0.43767041298052467],[-0.29578782751966104],[0.0853166563089025],[0.7421486857955188],[0.6404857872675129],[-0.238654773657065],[-0.9437710427375916],[0.17996000481538932],[0.9154353445822023],[0.6339510817769223],[0.5585546538460355],[-0.10215610199484715],[-0.7709769452553452],[0.7813684797166407],[-0.838715955308798],[-0.2546851333100748],[0.4797275548725901],[-0.5460192199665208],[0.2636744814566194],[-0.6546106817299306],[-0.7795161017046377],[0.2061905939640809],[0.1459083697538608],[-0.66084677343285],[-0.0712423993491278],[-0.002010039055258872],[0.42710211940520804],[-0.517565251563989],[0.8726046995357128],[0.9730254707426842],[0.34993812889342824],[0.02387016104875528],[-0.3874474470337579],[-0.5094380067813211],[0.283096876663421],[0.41329991950821565],[0.7471929314915657],[-0.32189745448747553],[0.01021040528683459],[0.5942159549636976],[-0.6468566078181714],[-0.0040541943936776015],[-0.5042302485042836],[0.5159161911375256],[-0.3713726965262434],[0.37305789605494954],[0.8679126250884766],[0.9646791065186888]],[[-0.4363075329913344],[0.11780772726267985],[-0.9463074028670162],[-0.7564387574499363],[-0.1120129026307124],[-0.4726384195947677],[0.3870627314480086],[-0.14606539100590288],[-0.6815080706476393],[0.4607718196748327],[0.10734246279938198],[0.09312650810611567],[0.6123285252205934],[0.38149434732727583],[0.7121009895278774],[0.5903059109818076],[0.31030053742752495],[0.18412644422518243],[5.917895576370569E-4],[-0.6826880840787775],[-0.7287982120198286],[-0.833123808945897],[-0.5376460568799319],[0.7897854083265266],[-0.961082482229688],[-0.27208806899059823],[0.08582178385602779],[0.7297656194895166],[-0.7551912562885317],[-0.16481239868213438],[0.6470999714945127],[-0.46348995761679745],[0.357038320285481],[0.9327903136978688],[0.12230114575118645],[0.9022544335339076],[-0.6264419604438207],[0.0699406152754789],[0.6111666366968835],[0.7036149769426219],[-0.7629346982924594],[-0.485089877134651],[-0.4227034764368285],[-0.15999752765816178],[-0.21743481157851807],[0.33435160717686685],[0.5324913630849295],[0.5549275547828136],[-0.8235065214184374]],[[-0.852833318737833],[0.582973354791446],[0.8496403189961375],[0.8643049848998512],[0.7548556831977682],[0.452592827809573],[0.5577197341686371],[0.5312218706088361],[-0.9075867682857388],[0.3662877068858452],[0.9741143682231419],[-0.8852387009809339],[0.8375020818615013],[0.840315395093747],[0.20072880052746633],[-0.6710808765270397],[0.4052306569470878],[-0.5746659081943508],[0.625247303089135],[-0.47319404886025307],[0.8016156512428907],[0.23114288918731685],[-0.35550399452591375],[-0.5727278375551745],[-0.10794444349092736],[0.6504366525250953],[-0.46421517280087476],[-0.39596803812514203],[-0.5581646232555766],[0.36666097233409145],[0.4781837303507972],[-0.00398003249985468],[-0.24026965934463362],[-0.7227851815363664],[0.8140794752559413],[-0.7194916955086756],[0.9414020180118037],[0.5019726217347098],[0.7992462296171952],[-0.5752390230243951],[0.5244411256254158],[-0.37630011369057037],[0.018209921698260523],[0.3611696789204317],[-0.5595130463945615],[-0.9831213966331878],[-0.5235758589808395],[-0.29972320184980683],[0.4083263802211192]],[[-0.8841289752369152],[-0.052998326832310205],[-0.5737905338535105],[0.9483713364953621],[-0.5127226331275678],[0.8957905090162401],[-0.1910141532497751],[-0.3743988449951621],[0.8629714515177516],[-0.08732206074009952],[0.24777854298406687],[0.5028827893250276],[0.9526540205970404],[-0.6440836180664808],[0.35674881514771695],[-0.8483150806296678],[-0.5504524551408925],[-0.2308721946871799],[-0.4177534173406996],[-0.8728226299097996],[0.10123102229928804],[0.27471303860235974],[0.8345444351660571],[-0.2831283459382883],[-0.01772765256753095],[0.34820139209391776],[0.13198510422405452],[-0.6127935757046323],[-0.7600310465335394],[0.7833501095456779],[-0.34238641754940957],[0.7851375936188818],[0.33866429538387033],[0.17810006143952029],[-0.6123334722659179],[0.8920042611292742],[0.620878250303758],[-0.3109353682056968],[0.7370284104890774],[-0.7160539092451481],[0.2679157642372476],[0.2655920613395404],[0.8093076030505921],[-0.72863126909956],[-0.2827914184984106],[-0.16629879332781883],[0.8685053677949646],[0.49542082718863645],[-0.45290882322827875]],[[-0.24985472641196305],[0.208782789828303],[0.09571668372832676],[0.23401508793052805],[0.7764678041267139],[-0.6786975873986845],[0.7161445314302579],[0.7777431850750878],[0.37903843969756545],[-0.7808105219027319],[0.5276431241616821],[0.501136893902963],[0.5334672682808415],[-0.011791355791971103],[-0.3528983072672225],[-0.4431442541955972],[0.41156623364647205],[-0.4484253702306651],[0.11433427541831609],[0.8363811782138351],[0.7390439804298041],[-0.6269793788464959],[0.36041345733111996],[-0.2618950634529087],[-0.7859418923080281],[0.38615666698992746],[-0.24894940360982298],[-0.08900620301439988],[0.5013228177646032],[-0.33856632704000766],[0.031698174630386156],[0.4913186679500181],[-0.8486441809050596],[0.12178482587792416],[-0.41135454345296507],[-0.6924432603511557],[-0.895707853580991],[0.6478150599499672],[0.4398112507960992],[-0.026936717331662585],[0.5363885853090231],[0.38363298166558746],[-0.6535868853984956],[0.4317255609473243],[-0.591526985528315],[0.6075677549193848],[-0.247252953505523],[-0.29768812215601237],[-0.5564780857163716]],[[0.16677928161367106],[-0.6035736562266782],[0.12597968682610405],[0.8862957860163299],[0.6050092722476657],[0.4163840751514809],[0.5669565812909485],[0.8613253961149421],[0.6288951065521462],[0.18374457850304138],[-0.5075418788472117],[-0.33438124568363525],[0.8213476577494472],[0.34289424495448895],[-0.22404673800435182],[-0.07688532955301719],[0.44586591428091893],[-0.9869747566606866],[0.8459252458145015],[-0.23777413649442103],[-0.38821779483354657],[0.7070014423930884],[-0.30136144760352224],[0.9620571058740905],[0.6717768010770375],[0.8320486863555545],[-0.7548239698458112],[-0.5635129180451237],[0.44838096765964686],[-0.3435897151780818],[-0.4824182971244415],[-0.7292503834206356],[0.3532486284211678],[0.9104280324281544],[0.22216236633154907],[0.25698962587797025],[-0.566853364437228],[-0.7878203127661236],[0.22298600188316664],[0.5826398563551956],[-0.8748333589831878],[-0.08587837689834688],[0.9380598623101757],[0.5987921877462941],[0.24504085481617555],[-0.5790495777795654],[0.5294436521880574],[0.7455428237016442],[-0.8290341746406393]],[[-0.7527000820056506],[0.3144709138110229],[0.10509566798147096],[-0.7619194439023325],[0.5724174747204254],[0.75713152072698],[0.9098601715684373],[0.06780876774737976],[0.07200929099961995],[-0.7968127699681138],[0.0152989238148602],[-0.5818163586161851],[-0.613645472837062],[0.486127677521766],[0.3193765299404956],[0.7476248036197624],[-0.830779572315874],[-0.8546811354603632],[0.7191256680158551],[-0.3517147918629844],[-0.6975878466637391],[-0.9768608230151683],[0.8667472735397164],[0.6141279798767583],[0.40984852398918115],[0.02820711587199831],[-0.017623704092872394],[0.18563427234437402],[0.31558729984943845],[-0.975916962840822],[-0.2933737389214217],[0.9386878779291328],[-0.61129243199714],[-0.06736508335892921],[0.7387034596627378],[-0.6892707587396134],[0.8958525470869438],[-0.026316296841396802],[-0.8304765639644902],[0.935533806751268],[0.45562190433101657],[0.18715078438076427],[-0.6019501391974442],[0.7205694296055394],[0.9385667021541577],[-0.7536971447382736],[0.5404445631740757],[-0.723852598326276],[0.6726370628950384]],[[0.43277705844499526],[0.3638049123535425],[0.6102726434722578],[0.6514710577577527],[0.15025821282766572],[-0.3547028210177956],[0.8338120513132781],[0.6262137113607493],[-0.6137894739467549],[0.09627827178252035],[0.4573365607434492],[0.6298607023006788],[0.8195678071933727],[-0.47912808928114803],[-0.8264831805078647],[-0.5010304621904975],[0.11810021291771422],[0.3507193522026486],[-0.20050703174065232],[0.8493628265150432],[-0.7429326495913045],[0.5042297015988351],[-0.024398393898592996],[-0.9596182190437652],[-0.5690301079487705],[-0.9737358394513773],[-0.4652224624308925],[-0.434151355762042],[-0.6406173407030842],[0.8878933353152507],[-0.37765349597623565],[-0.06552737628035565],[-0.5523569192879672],[-0.8814992385065836],[-0.44813646340483837],[-0.16514314970960742],[0.02965383521292031],[0.3464261958239434],[-0.19421069850094153],[0.6917675120486875],[0.9711371909536175],[-0.2970063396501583],[-0.2888425098459373],[0.9909081588662683],[0.7766654751131843],[0.056904878661030445],[-0.8420301401969437],[0.7707306833108318],[0.9405643210921242]],[[0.48726418062639176],[0.6032163061414151],[0.5106431706904053],[-0.7850678693558915],[-0.2761867008912451],[0.33901637968266307],[0.9089341401882174],[0.5014740507749123],[0.08637313452655748],[-0.7026886339730729],[0.2764041469526979],[-0.040100615197697476],[0.7183943687197569],[-0.9711884178949686],[0.4526789322225713],[0.3986179020397538],[-0.8046322878065633],[0.6741936350554489],[0.9262775245849606],[0.947686417236425],[0.4750157181239749],[0.04212992563090978],[0.17540121625036065],[0.33927468598671684],[0.37561990352665964],[-0.001212927726888413],[-0.06537353525932943],[0.5632576276255876],[0.6080382379878002],[0.7993702848353377],[0.46534227546806006],[0.9815729248469021],[-0.05483850515632405],[0.6630736059654203],[0.6376311772027061],[0.2053880015356464],[0.02133359286800962],[0.4456966317294002],[-0.6214492767652544],[-0.20299664505612292],[-0.04167731209496317],[-0.7369885822505822],[0.3523912727956633],[0.25294856461076787],[-0.0962863684297317],[-0.3964500802233184],[0.6790326432612566],[0.5581684317428626],[-0.8772404679347376]],[[-0.4439315888982449],[-0.9600886050265642],[0.24013065616245965],[-0.6275334672827979],[0.25077340359816835],[0.8890555901307322],[-0.9694433092992831],[0.5899017856584656],[0.8226308180963913],[-0.7713852280205975],[0.4156477771282594],[0.2011509004029377],[-0.8289696557094759],[-0.29872779333948696],[-0.6396636429854121],[-0.8793581851961325],[0.4659059195169477],[0.6253553956828295],[0.9197875906110626],[-0.21470725194317142],[0.980263172890008],[-0.33316941084661833],[0.5015378200169511],[-0.6994280430285649],[0.6530437506499593],[-0.1698538207386835],[0.6516858614265479],[0.7928230552524411],[-0.8367862029101127],[-0.033116765311456575],[-0.2671498146330382],[0.3013269231821645],[-0.7900267001364893],[-0.8321410090806038],[0.02319999957704999],[0.7058032886324148],[-0.6572657705254725],[0.7108149751052184],[0.9800675270240573],[-0.5756464165392781],[-0.1270479564974485],[-0.18468601007398755],[-0.7424289958868893],[0.9597065611355524],[0.6201755904278077],[-0.20645590039386352],[-0.18583726665890987],[-0.9901530540660848],[0.6436469912627958]],[[-0.9049547643533726],[-0.5162946760260763],[-0.7217187719521356],[0.29157151708445284]]]"

        val genotype = genotypeFromPrintedString(s)

        assertEquals(17, genotype.count())
        assertEquals(49, genotype[0].count())
        assertEquals(0.42865779293276507, genotype.get(0, 0).allele)
    }
}
